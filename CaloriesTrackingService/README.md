# Разработка Сервиса Контроля Калорий v1.0

## Описание задачи:<br>
Необходимо создать REST API сервис для отслеживания дневной нормы калорий пользователя и учета съеденных блюд.
## Требования:<br>
1. Пользователи. Добавление пользователей с параметрами:
- ID
- Имя
- Email
- Возраст
- Вес
- Рост
- Цель (Похудение, Поддержание, Набор массы)
- На основе данных автоматически рассчитать дневную норму калорий (можно использовать формулу Харриса-Бенедикта).

2. Блюда. Добавление блюд с параметрами:
- ID
- Название
- Количество калорий на порцию
- Белки/Жиры/Углеводы

3. Прием пищи. Пользователь может добавлять прием пищи со списком блюд


4. Отчеты (эндпоинты, без формирования документа):
- отчет за день с суммой всех калорий и приемов пищи;
- проверка, уложился ли пользователь в свою дневную норму калорий;
- история питания по дням.

Нефункциональные требования:
- использовать Spring Boot + Spring Data JPA;
- база данных PostgreSQL;
- валидация входных данных (например, проверка веса и роста на адекватность);
- написать юнит-тесты для основной логики;
- реализовать обработку ошибок (например, если пользователь не найден).

### Запуск проекта:<br>
1. Клонировать репозиторий.

<strong><u>Запуск приложения с локально установленной базой PostgreSQL:</u></strong>
2. В базе данных PostgreSQL создать базу с названием calories_tracking_service
3. В application.yml убедится что указан корректный url базы данных
```
url: jdbc:postgresql://localhost:5432/calories_tracking_service
```
<strong><u>Запуск приложения с базой, установленной в Docker контейнере с PostgreSQL:</u></strong>
2. В application.yml убедится что указан корректный url базы данных
```
url: jdbc:postgresql://localhost:5433/calories_tracking_service
```
3. Перейти в папку docker и запустить docker-контейнер с БД PostgreSQL.
````
cd docker
docker compose up
````
4. Запустить проект в своей IDE.

### Проверка работы запросов:<br>
Для упрощения проверки работоспособности предлагаю использовать готовые запросы для Postman.<br>
Что нужно сделать:<br>
1. Импортировать коллекцию в Postman из <u>src/main/resources/other/CaloriesTrackingService.postman_collection.json</u>
2. В Postman создать окружение, в котором указать:

   | Variable | Type    | Initial value      | Current value |
      |----------|---------|--------------------|---------------|
   | baseUrl  | default | http://localhost:8080/ |http://localhost:8080/|

Описание работы методов:

<u>1. Users</u>
- GetUserById - Позволяет получить пользователя, по его id.
Принимает id пользователя в параметрах.
- GetAllUser - Позволяет получить список всех пользователей, зарегистрированных в системе.
- DeleteUserById - Позволяет удалить пользователя, по его id.
Принимает id пользователя в параметрах.
- CreateNewUser - Позволяет создать нового пользователя.
Принимает JSON в теле запроса в формате:
```
{
    "name": "Сергей",
    "email": "simple123@mail.ru",
    "age": 28,
    "weight": 79,
    "height": 178,
    "goal": "WEIGHT_GAIN",
    "gender": "MALE",
    "lifeStyle": "WORKOUT_THREE_FIVE"
}
```
Возможные значения для:<br>
goal - WEIGHT_LOSS, MAINTENANCE, WEIGHT_GAIN;<br>
gender - MALE, FEMALE;<br>
lifeStyle - SEDENTARY, WORKOUT_ONE_THREE, WORKOUT_THREE_FIVE, WORKOUT_SIX_SEVEN, SPORTSMEN;

- UpdateUser - Позволяет обновить данные пользователя. Поиск пользователя осуществляется по email.
Принимает JSON в теле запроса в формате:
```
{
    "name": "Сергей",
    "email": "simple123@mail.ru",
    "age": 28,
    "weight": 79,
    "height": 178,
    "goal": "WEIGHT_GAIN",
    "gender": "MALE",
    "lifeStyle": "WORKOUT_THREE_FIVE"
}
```
Возможные значения для:<br>
goal - WEIGHT_LOSS, MAINTENANCE, WEIGHT_GAIN;<br>
gender - MALE, FEMALE;<br>
lifeStyle - SEDENTARY, WORKOUT_ONE_THREE, WORKOUT_THREE_FIVE, WORKOUT_SIX_SEVEN, SPORTSMEN;

<u>2. Dishes</u>
- GetDishById - Позволяет получить блюдо, по его id.
  Принимает id блюда в параметрах.
- GetAllDishes - Позволяет получить список всех блюд, добавленных в систему.
- DeleteDishById - Позволяет удалить блюдо, по его id.
  Принимает id блюда в параметрах.
- CreateNewDish - Позволяет создать новое блюдо.
  Принимает JSON в теле запроса в формате:
```
{
    "name": "Яблоко",
    "countCaloriesPerServing": 10,
    "proteins": 5,
    "fats": 0.9,
    "carbohydrates": 2
}
```

- UpdateDish - Позволяет обновить данные блюда. Поиск блюда осуществляется по названию.
  Принимает JSON в теле запроса в формате:
```
{
    "name": "Яблоко",
    "countCaloriesPerServing": 1011,
    "proteins": 6,
    "fats": 0.5,
    "carbohydrates": 1.5
}
```

- InitTableDishes - Позволяет добавить список блюд из csv файла. При вызове метода сначала происходит очистка базы, затем её наполнение.

<u>3. Meals</u>
- GetMealById - Позволяет получить приём пищи, по его id.
  Принимает id приёма пищи в параметрах.
- GetAllMeals - Позволяет получить список всех приёмов пищи, добавленных в систему.
- DeleteMealById - Позволяет удалить приём пищи, по его id.
  Принимает id приёма пищи в параметрах.
- CreateNewMeal - Позволяет создать новый приём пищи.
  Принимает id пользователя в параметрах и JSON в теле запроса в формате:
```
{
    "title": "Завтрак",
    "mealDate": "2025-03-28",
    "mealTime": "09:00",
    "dishes": [15, 22, 58]
}
```

- UpdateMeal - Позволяет обновить данные приёма пищи.
  Принимает id пользователя в параметрах и JSON в теле запроса в формате:
```
{
    "title": "Завтрак",
    "mealDate": "2025-03-28",
    "mealTime": "09:10",
    "dishes": [15, 22]
}
```

<u>4. Reports</u>
- ReportCheckIntake - проверка, уложился ли пользователь в свою дневную норму калорий. Принимает в параметрах дату отчета и id пользователя.
- ReportToday - отчет за день с суммой всех калорий и приемов пищи. Принимает в параметрах дату отчета и id пользователя.
- ReportHistoryByDays - история питания по дням. Принимает в параметрах id пользователя.

### Стек технологий::<br>
- Java Core
- Spring Boot
- Hibernate
- PostgreSQL
- Docker
- Apache Maven
- Lombok
- Junit-jupiter
- Mockito-Core
